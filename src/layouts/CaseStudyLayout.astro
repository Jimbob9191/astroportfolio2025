---
import Layout from './Layout.astro';
import Button from '../components/Button.astro';
import { caseStudies } from '../data/caseStudies';

export interface Props {
  title: string;
  slug: string;
}

const { title, slug } = Astro.props;
const project = caseStudies.find(p => p.slug === slug);

if (!project) {
  return Astro.redirect('/work');
}

// Get next project for the navigation
const currentIndex = caseStudies.findIndex(p => p.slug === slug);
const nextIndex = (currentIndex + 1) % caseStudies.length;
const nextProject = caseStudies[nextIndex];
---

<Layout title={`${title} | James â€” UX/UI Designer & Product Manager`}>
  <article>
    <div class="hero-section h-[70vh] relative flex items-end">
      <img 
        src={project.heroImage} 
        alt={project.title} 
        class="absolute inset-0 w-full h-full object-cover"
      />
      <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"></div>
      
      <div class="container relative z-10 pb-16">
        <h1 class="text-4xl md:text-6xl font-display text-white font-medium mb-4">{project.title}</h1>
        <p class="text-white/80 text-xl max-w-2xl">{project.overview}</p>
      </div>
    </div>
    
    <div class="container">
      <div class="max-w-3xl mx-auto py-20">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-12 mb-20">
          <div>
            <h2 class="text-lg uppercase tracking-wider mb-4">Role</h2>
            <p>{project.role}</p>
          </div>
          <div>
            <h2 class="text-lg uppercase tracking-wider mb-4">Categories</h2>
            <p>{project.categories.join(', ')}</p>
          </div>
          <div>
            <h2 class="text-lg uppercase tracking-wider mb-4">Business</h2>
            <p>{project.client}</p>
          </div>
          <div>
            <h2 class="text-lg uppercase tracking-wider mb-4">Timeline</h2>
            <p>{project.timeline}</p>
          </div>
        </div>
        
        {project.slug === 'finance-app-redesign' && (
          <section class="mb-16">
            <h2 class="text-2xl md:text-3xl font-display font-medium mb-6">Background</h2>
            <p class="text-secondary text-lg leading-relaxed mb-6">
              CRSMI is an internally built data management and reporting platform used by account managers and clients. The platform allows users to manipulate and interrogate data as they please, offering a standard set of reports which can then be expanded further down the line. (Similar to how google analytics works).
            </p>
            <p class="text-secondary text-lg leading-relaxed mb-4">Key features include:</p>
            <ul class="space-y-3 text-secondary text-lg mb-8">
              <li class="flex items-start">
                <span class="w-2 h-2 bg-primary rounded-full mt-3 mr-4 flex-shrink-0"></span>
                Daily, weekly and monthly overviews with sorts and filters that can be presented as: Bar charts, Pie charts, Line graphs and tables.
              </li>
              <li class="flex items-start">
                <span class="w-2 h-2 bg-primary rounded-full mt-3 mr-4 flex-shrink-0"></span>
                Account management features including: opening and closing cases, editing details, accessing communication history, adding and responding to queries.
              </li>
              <li class="flex items-start">
                <span class="w-2 h-2 bg-primary rounded-full mt-3 mr-4 flex-shrink-0"></span>
                The ability to upload and export data in a variety of file types.
              </li>
            </ul>
          </section>
        )}
        
        {project.slug === 'finance-app-redesign' && (
          <section class="mb-16">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="background-gallery">
              <a 
                href="/crsmiimages/crsmi-2.webp"
                class="block img-hover rounded-lg overflow-hidden background-gallery-item w-full"
                data-pswp-width="1260"
                data-pswp-height="750"
              >
                <img 
                  src="/crsmiimages/crsmi-2.webp" 
                  alt="CRSMI original interface showing design inconsistencies" 
                  class="w-full h-full object-cover"
                  loading="lazy"
                />
              </a>
              <a 
                href="/crsmiimages/crsmi-3.webp"
                class="block img-hover rounded-lg overflow-hidden background-gallery-item w-full"
                data-pswp-width="1260"
                data-pswp-height="750"
              >
                <img 
                  src="/crsmiimages/crsmi-3.webp" 
                  alt="CRSMI platform analysis and user flow issues" 
                  class="w-full h-full object-cover"
                  loading="lazy"
                />
              </a>
              <a 
                href="/crsmiimages/crsmi-4.webp"
                class="block img-hover rounded-lg overflow-hidden background-gallery-item w-full"
                data-pswp-width="1260"
                data-pswp-height="750"
              >
                <img 
                  src="/crsmiimages/crsmi-4.webp" 
                  alt="CRSMI component audit and design system planning" 
                  class="w-full h-full object-cover"
                  loading="lazy"
                />
              </a>
            </div>
          </section>
        )}
        
        <section class="mb-16">
          <h2 class="text-2xl md:text-3xl font-display font-medium mb-6">The Problem</h2>
          <p class="text-secondary text-lg leading-relaxed">{project.problem}</p>
        </section>
        
        {project.slug === 'metamask-onboarding' && (
          <section class="mb-16">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8" id="problem-gallery">
              <a 
                href="/metamaskimages/metamask-2.webp"
                class="block img-hover rounded-lg overflow-hidden problem-gallery-item w-full"
                data-pswp-width="1260"
                data-pswp-height="750"
              >
                <img 
                  src="/metamaskimages/metamask-2.webp" 
                  alt="MetaMask original onboarding screens showing inconsistent styling" 
                  class="w-full h-full object-cover"
                  loading="lazy"
                />
              </a>
              <a 
                href="/metamaskimages/metamask-3.webp"
                class="block img-hover rounded-lg overflow-hidden problem-gallery-item w-full"
                data-pswp-width="1260"
                data-pswp-height="750"
              >
                <img 
                  src="/metamaskimages/metamask-3.webp" 
                  alt="MetaMask onboarding flow analysis and issues" 
                  class="w-full h-full object-cover"
                  loading="lazy"
                />
              </a>
            </div>
          </section>
        )}
        
        {project.slug === 'finance-app-redesign' && (
          <section class="mb-16">
            <h2 class="text-2xl md:text-3xl font-display font-medium mb-6">The Solution</h2>
            <p class="text-secondary text-lg leading-relaxed mb-6">
              I started by talking with key stakeholders in the business, such as account managers and the compliance team, before talking to select clients and sending out surveys to get feedback on what tools they use, what can be improved and what they struggle with. I combined this with heatmapping and user recordings to further refine the changes that were needed.
            </p>
            <p class="text-secondary text-lg leading-relaxed">
              After I had a clearer scope of the project, I created a design system for the site (and other sites in the business) to use. This included colours, fonts, buttons, inputs, graphs, tables and layout conventions. I also worked closely with the development team to implement new features such as notifications, a quick onboarding feature and a dark mode. Before QAing and testing each feature before deployment.
            </p>
          </section>
        )}
        
        <slot />

        {project.slug === 'metamask-onboarding' && (
          <section class="mt-20 pt-16 border-t">
            <h2 class="text-2xl md:text-3xl font-display font-medium mb-8">The Solution</h2>
            <p class="text-secondary text-lg leading-relaxed mb-6">
              In order to help alleviate some of the issues mentioned above, I did the following:
            </p>
            <ul class="space-y-4 text-secondary text-lg">
              <li class="flex items-start">
                <span class="w-2 h-2 bg-primary rounded-full mt-3 mr-4 flex-shrink-0"></span>
                Set a clear type hierarchy.
              </li>
              <li class="flex items-start">
                <span class="w-2 h-2 bg-primary rounded-full mt-3 mr-4 flex-shrink-0"></span>
                Consolidate the styling of inputs and buttons.
              </li>
              <li class="flex items-start">
                <span class="w-2 h-2 bg-primary rounded-full mt-3 mr-4 flex-shrink-0"></span>
                Adjust the colour scheme to inspire trust.
              </li>
            </ul>
          </section>
        )}
      </div>
    </div>
    
    <div class="bg-black py-16">
      <div class="container">
        <div class="flex flex-col items-center">
          <p class="text-white/60 mb-4">Next Project</p>
          <h3 class="text-2xl md:text-3xl font-display text-white font-medium mb-8">
            {nextProject.title}
          </h3>
          <a 
            href={`/work/${nextProject.slug}`}
            class="inline-flex items-center rounded-full py-3 px-6 bg-black text-white border border-white hover:bg-white hover:text-black transition-colors duration-300"
          >
            <span>View Project</span>
            <svg 
              xmlns="http://www.w3.org/2000/svg" 
              width="20" 
              height="20" 
              viewBox="0 0 24 24" 
              fill="none" 
              stroke="currentColor" 
              stroke-width="2" 
              stroke-linecap="round" 
              stroke-linejoin="round" 
              class="ml-2 transition-transform group-hover:translate-x-1 group-hover:-translate-y-1"
            >
              <line x1="7" y1="17" x2="17" y2="7"></line>
              <polyline points="7 7 17 7 17 17"></polyline>
            </svg>
          </a>
        </div>
      </div>
    </div>
  </article>
</Layout>